// WARNING: this file is auto-generated by the C2 compiler.
// Any changes you make might be lost!

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "utils.h"


int32_t utils_str_split(const unsigned char* str, unsigned char c, unsigned char*** arr) {
  int32_t count = 1;
  int32_t token_len = 1;
  int32_t i = 0;
  unsigned char* p;
  unsigned char* t;
  p = str;
  while (p != '\0') {
    if (p == c) count++;
    p++;
  }
  arr = malloc(sizeof(unsigned char*) * count);
  if (arr == NULL) exit(1);
  p = str;
  while (p != '\0') {
    if (p == c)
    {
      arr[i] = malloc(sizeof(unsigned char) * token_len);
      if (arr[i] == NULL) exit(1);
      token_len = 0;
      i++;
    }
    p++;
    token_len++;
  }
  arr[i] = malloc(sizeof(unsigned char) * token_len);
  if (arr[i] == NULL) exit(1);
  i = 0;
  p = str;
  t = (arr[i]);
  while (p != '\0') {
    if (p != c && p != '\0')
    {
      t = p;
      t++;
    }
    else
    {
      t = '\0';
      i++;
      t = (arr[i]);
    }
    p++;
  }
  return count;
}

