// WARNING: this file is auto-generated by the C2 compiler.
// Any changes you make might be lost!

#include <stdio.h>
#include <stdlib.h>
#include "c2vector.h"

static void c2vector_resize(c2vector_vector* v, int32_t capacity);

void c2vector_init(c2vector_vector* v) {
  v->capacity = 4;
  v->total = 0;
  v->items = malloc(sizeof(void*) * v->capacity);
}

int32_t c2vector_total(c2vector_vector* v) {
  return v->total;
}

static void c2vector_resize(c2vector_vector* v, int32_t capacity) {
  void** items = realloc(v->items, sizeof(void*) * capacity);
  if (items != NULL)
  {
    v->items = items;
    v->capacity = capacity;
  }
}

void c2vector_add(c2vector_vector* v, void* item) {
  if (v->capacity == v->total) c2vector_resize(v, v->capacity * 2);
  v->items[v->total++] = item;
}

void c2vector_set(c2vector_vector* v, int32_t index, void* item) {
  if (index >= 0 && index < v->total) v->items[index] = item;
}

void* c2vector_get(c2vector_vector* v, int32_t index) {
  if (index >= 0 && index < v->total) return v->items[index];
  return NULL;
}

void c2vector_delete(c2vector_vector* v, int32_t index) {
  if (index < 0 || index >= v->total) return;
  v->items[index] = NULL;
  for (int32_t i = 0; i < v->total - 1; i++) {
    v->items[i] = v->items[i + 1];
    v->items[i + 1] = NULL;
  }
  v->total--;
  if (v->total > 0 && v->total == v->capacity / 4) c2vector_resize(v, v->capacity / 2);
}

void c2vector_free(c2vector_vector* v) {
  free(v->items);
}

